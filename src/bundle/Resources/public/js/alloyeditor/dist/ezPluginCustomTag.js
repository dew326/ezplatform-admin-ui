!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ezPluginCustomTag=t():(e.eZ=e.eZ||{},e.eZ.ezAlloyEditor=e.eZ.ezAlloyEditor||{},e.eZ.ezAlloyEditor.ezPluginCustomTag=t())}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=61)}({61:function(e,t,n){"use strict";!function(e){CKEDITOR.plugins.get("ezcustomtag")||CKEDITOR.plugins.add("ezcustomtag",{requires:"widget,ezaddcontent",init:function(e){e.widgets.add("ezcustomtag",{defaults:{name:"customtag"},draggable:!1,template:'<div data-ezelement="ezcustomtag" data-ezname="{name}"></div>',requiredContent:"div",insert:function(){var t,n=CKEDITOR.dom.element.createFromHtml(this.template.output(this.defaults)),i=e.widgets.wrapElement(n,this.name),a=new CKEDITOR.dom.documentFragment(i.getDocument());a.append(i),e.widgets.initOn(n,this.name),e.eZ.appendElement(i),t=e.widgets.getByElement(i),t.ready=!0,t.fire("ready"),t.focus()},edit:function(){this.insert()},init:function(){this.on("focus",this.fireEditorInteraction),this.syncAlignment(),this.getEzConfigElement(),this.setWidgetContent("Testing content"),this.cancelEditEvents()},setName:function(e){return this.element.data("ezname",e),this},cancelEditEvents:function(){var e=function(e){return e.cancel()};this.on("doubleclick",e,null,null,5),this.on("key",e,null,null,5)},syncAlignment:function(){var e=this.element.data("ezalign");e?this.setAlignment(e):this.unsetAlignment()},setAlignment:function(e){this.wrapper.data("ezalign",e),this.element.data("ezalign",e)},unsetAlignment:function(){this.wrapper.data("ezalign",!1),this.element.data("ezalign",!1)},isAligned:function(e){return this.wrapper.data("ezalign")===e},setWidgetContent:function(e){for(var t=this.element.getFirst(),n=void 0;t;)n=t.getNext(),t.data&&t.data("ezelement")||t.remove(),t=n;return e instanceof CKEDITOR.dom.node?this.element.append(e):this.element.appendText(e),this},setConfig:function(e,t){var n=this.getValueElement(e);return n||(n=new CKEDITOR.dom.element("span"),n.data("ezelement","ezvalue"),n.data("ezvalue-key",e),this.getEzConfigElement().append(n)),n.setText(t),this},getConfig:function(e){var t=this.getValueElement(e);return t?t.getText():void 0},getValueElement:function(e){return this.element.findOne('[data-ezelement="ezvalue"][data-ezvalue-key="'+e+'"]')},getEzConfigElement:function(){var e=this.element.findOne('[data-ezelement="ezconfig"]');return e||(e=new CKEDITOR.dom.element("span"),e.data("ezelement","ezconfig"),this.element.append(e,!0)),e},fireEditorInteraction:function(t){var n=this.getWrapperRegion(),i=t.name||t,a={editor:e,target:this.element.$,name:"widget"+i,pageX:n.left,pageY:n.top+n.height};e.focus(),this.focus(),e.fire("editorInteraction",{nativeEvent:a,selectionData:{element:this.element,region:n}})},getWrapperRegion:function(){var e=this.wrapper.getWindow().getScrollPosition(),t=this.wrapper.getClientRect();return t.top+=e.y,t.bottom+=e.y,t.left+=e.x,t.right+=e.x,t.direction=CKEDITOR.SELECTION_TOP_TO_BOTTOM,t}})}})}(window)}}).default});
//# sourceMappingURL=ezPluginCustomTag.js.map